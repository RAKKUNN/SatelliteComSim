## Software Defined Radio

무선 통신에서 변조 복조 과정을 SW를 통하여 처리하는 기술

---

## 변조와 복조의 필요성

무선 통신이나 유선 통신에서 **변조**(modulation)는 정보를 담고 있는 신호(메시지 신호)의 특성으로 보다 높은 주파수의 **반송파** 신호를 변화시키는 과정입니다. 예를 들어 마이크 소리나 디지털 비트열과 같은 원신호를 고주파 정현파의 진폭, 주파수 또는 위상 변화로 실어 보내는 것입니다.

반송파를 사용하는 이유는 다음과 같습니다:

1. **낮은 주파수 신호를 직접 전송하기 어렵기 때문입니다.** 낮은 주파수의 전기 신호는 파장이 매우 길어 효과적으로 방사하기 위해 거대한 안테나가 필요하며, 이는 실용적이지 않습니다.
2. **여러 신호를 한 통신 매체에 다중화할 수 있습니다.** 서로 다른 주파수 대역의 반송파를 사용하면 한 채널이 다른 채널에 간섭을 주지 않으므로, 케이블 TV처럼 하나의 매체에 여러 **주파수 분할 다중화(FDM)** 신호를 동시에 실어 보낼 수 있습니다.
3. **디지털 신호를 아날로그 형태로 변환**하여 기존의 아날로그 통신망을 통해 전달할 수 있습니다. 예를 들어 전화 회선은 사람의 음성 주파수 대역만 전달하도록 설계되었지만, 컴퓨터의 **모뎀**은 디지털 데이터를 특정 음향 톤(반송파)으로 **변조**하여 보내고 수신 모뎀은 이를 다시 디지털 데이터로 **복조**합니다.

수신기에서는 각 반송파를 **복조**(demodulation)하여 원하는 신호를 분리해낼 수 있습니다. 모뎀(Modem)은 **MOdulator-DEModulator**의 약자로 변조기와 복조기 역할을 모두 수행합니다.

## 아날로그 변조 vs 디지털 변조

통신 시스템에서 변조 방식은 **메시지 신호의 종류**에 따라 크게 아날로그 변조와 디지털 변조로 나눌 수 있습니다.

### 아날로그 변조

- 연속적인 아날로그 신호(예: 음성, 영상)를 반송파에 실어보내는 방식
- 라디오 방송의 **AM**(진폭 변조)과 **FM**(주파수 변조)이 대표적
- 회로구성이 단순하고 실시간 전송에 유리
- 20세기 초반 라디오, 아날로그 TV 등 초창기 통신 시스템의 발전을 이끌었음

### 디지털 변조

- 이산적인 디지털 비트 정보를 반송파에 실어보내는 방식
- 컴퓨터 시대에 등장하여 고속의 데이터 통신(인터넷, 디지털 방송, 이동통신)을 가능하게 함
- **주어진 주파수 대역을 더 효율적**으로 활용하여 더 많은 데이터와 사용자들을 수용 가능
- **잡음과 간섭에 강인**하며 오류 검출/정정 등의 부가 기능을 통해 신뢰도를 높일 수 있음
- 구현을 위해 ADC/DAC 및 DSP 등의 **복잡한 회로나 처리**가 필요하며, 정확한 동기 맞추기가 요구됨

```
구분아날로그 변조디지털 변조메시지 신호연속적인 아날로그 신호 (음성, 음악 등)이산적인 디지털 신호 (0과 1의 비트열)변조 방법반송파의아날로그 특성(진폭·주파수·위상)을연속적으로 변화시킴반송파의 특성을몇 가지 불연속 값으로변경 (Keying)대표 예시AM, FM, PM 등 (라디오 방송 등)ASK, FSK, PSK, QAM 등 (Wi-Fi, 휴대폰 등)장점회로가 단순하고즉시성 높음 (실시간 아날로그 방송에 적합)고속 데이터 전송 가능,스펙트럼 효율 높음, 잡음에 강함단점잡음 누적으로품질 열화 (서서히 음질 저하) 및오류 검출 어려움동기 복조 등구현 복잡, 충분한 SNR 필요 (문턱 효과)활용AM/FM 라디오, 아날로그 TV, 무전기 등디지털 방송, LTE/5G 이동통신, 위성 데이터 전송 등
```

**아날로그 변조**의 개념을 시각화한 것으로, 맨 위 파형(파란색)이 원래 **베이스밴드 신호**이고, 가운데 빨간색 파형이 이를 반송파에 실은 **AM 신호**입니다. 베이스밴드 신호의 진폭 변화에 따라 고주파 반송파의 진폭이 동일한 모양으로 변조되어 전송되는 것이 보입니다. 참고로 가장 아래 녹색 파형은 **FM 신호**로, 원 신호의 크기에 따라 반송파의 주파수가 변하는 예시입니다.

## 주요 변조 기법

### 진폭 변조(AM)

아날로그 변조 방식으로, 반송파 **신호의 진폭**(세기)을 메시지 신호의 세기에 비례하도록 변화시키는 기법입니다. 예를 들어 마이크 음성신호로 AM 변조하면, 고주파 반송파의 진폭이 순간순간 음성 파형에 따라 커졌다 작아졌다 합니다.

- 구현이 비교적 간단하며 라디오 방송 초기에 개발된 가장 오래된 변조 방식
- AM 라디오 방송(장파/중파/단파 방송)뿐 아니라, 항공 무선통신, CB 무전기 등에서도 사용됨
- 변종으로 **SSB**(Single SideBand) 같은 방식도 있음
- **복조** 방법은 주로 **포락선 검파**(envelope detection)로, 다이오드 등을 이용해 수신 신호의 진폭 외곽을 따라가는 전압을 얻어내면 원래의 메시지 신호를 회복할 수 있음
- 반송파를 줄인 신호(DSB-SC 등)는 수신기에서 반송파를 재생해 곱으로 검출하는 **동기식 복조**가 필요함

### 직교 진폭 변조(QAM)

QAM은 **Quadrature Amplitude Modulation**의 약자로, 직교하는 두 개의 반송파에 **진폭 변조(ASK)**를 각각 수행하여 신호를 전송하는 방식입니다.

- 하나의 반송파(sin)와 이에 90° 위상차인 직교 반송파(cos)를 준비한 뒤, 각각의 반송파에 다단 진폭 변조 신호를 실어 동시에 보냄
- 수학적으로 I축 (cos, 동상성분)과 Q축 (sin, 직교성분)의 두 채널을 사용
- 결과적으로 신호의 **진폭과 위상이 모두 변하는** 복합적인 변조가 이루어짐
- **PSK와 ASK의 결합** 형태로 볼 수 있으며, 진폭과 위상 **별자리(diagram)** 상의 **심볼**들로 데이터를 표현
- 예: **16-QAM**의 경우 진폭/위상 조합으로 이루어진 16개의 심볼을 정의하여 한 심볼에 4비트의 정보를 실어 보냄
- 주어진 대역폭에서 고차원의 심볼을 전송함으로써 높은 자료율을 얻을 수 있어, 디지털 케이블방송, WIFI, LTE 등 현대 **고속 데이터 통신**에서 널리 사용됨
- **진폭**도 함께 변조되므로 PSK에 비해 잡음의 영향이 크고 **고신뢰 통신에서는 더 높은 SNR이 요구**되는 단점이 있음

**16-QAM**의 **별자리 다이어그램** 예시입니다. 두 개의 직교 축(I와 Q축)에 걸쳐 **16개의 점**이 배치되어 있으며, 각 점마다 4비트의 이진값(Gray 부호화)이 할당되어 있습니다. QAM 신호에서는 이러한 **심볼** 하나하나가 반송파의 진폭과 위상 조합으로 표현됩니다.

### 진폭 편이 변조(ASK)

ASK는 **Amplitude Shift Keying**의 약자로, 디지털 데이터(이산적인 값)를 **몇 가지 진폭의 변화**로 표현하는 변조 방식입니다.

- 2진 ASK의 가장 단순한 형태는 **온오프 변조(OOK)**로, 반송파를 **송신하거나(1) 보내지 않음(0)**으로 1과 0을 구별
- 일반적으로는 **"1"일 때 높은 진폭, "0"일 때 낮은 진폭**처럼 두 수준 이상의 진폭을 사용
- 구현이 가장 간단한 디지털 변조이지만, 신호 세기가 전송로에서 감소하거나 잡음이 섞일 경우 판별이 어려워 **잡음에 가장 민감**한 방식
- 단거리 **광통신**(LED 깜빡임으로 0/1 표현)이나 초기 **모스부호 무선통신**(연속파 온오프 키잉) 등에 활용됨
- ASK에서도 진폭의 **레벨 수를 늘려** 한 번에 더 많은 비트를 보낼 수 있음 (예: **4-ASK**는 4단계 진폭으로 **한 심볼에 2비트**를 전송)
- 레벨을 늘릴수록 심볼 간 간격이 좁아지므로 **더 높은 SNR**이 요구되어 실용적으로 4~8-ASK 이상은 잘 사용되지 않음

### 위상 편이 변조(PSK)

PSK는 **Phase Shift Keying**의 약자로, 반송파의 **위상(Phase)**을 몇 가지 값으로 변화시켜 디지털 정보를 전송하는 방식입니다.

- 반송파의 **주파수와 진폭은 고정**해 두고 신호의 **위상만 변조**
- **BPSK**(Binary PSK)에서는 0과 1에 대해 반송파의 위상을 180° 다르게 송신
- **QPSK**(Quadrature PSK)는 위상 4가지 (90° 간격)로 한 심볼에 2비트를 보내는 방식
- QPSK는 BPSK 대비 **두 배의 데이터율**을 얻으면서도 필요한 대역폭을 절반으로 줄일 수 있음
- 위상 레벨을 늘릴수록 (8-PSK, 16-PSK 등) 심볼당 전송 비트를 증가시킬 수 있지만, 위상 간격이 촘촘해질수록 잡음에 취약해짐
- **장점**: 반송파 **진폭이 일정**하게 유지되어 **채널 감쇄에 강인**함, **스펙트럼 효율**이 높음
- **단점**: 정확한 복조를 위해 송신기와 수신기의 위상 기준을 맞춰야 함, **동기식 복조**(coherent detection)가 필요해 구현 복잡도가 높음

### 차등 부호화 변조(Differential Modulation)

위상 변조에서 **차등 방식**은 위상 동기 문제를 완화하기 위해 고안되었습니다.

- **DPSK**(Differential PSK)는 **연속된 심볼 간의 위상 변화**에 정보를 실어 보내는 기법
- 절대적인 위상 기준이 없어도 이전 심볼을 참고하여 데이터 복원이 가능
- 예: DBPSK의 경우 이전 심볼 대비 위상이 0° 그대로이면 "0", 180° 변경되면 "1"로 해석
- 수신기에서 **동기 기준**을 유지할 필요 없이 **비동기식 복조**가 가능해져 회로 구현이 단순해짐
- **대가로 오류율이 약간 상승**하는 단점이 있어, 일반 PSK 대비 약 2배의 SNR이 추가로 필요함
- 전파 경로에서 반송파 위상이 불규칙하게 변하는 환경(예: 이동통신 채널)에서는 동기식보다 차등식이 실제 오류율이 더 유리할 수 있음
- **블루투스 표준**이 대표적으로 π/4-DQPSK(차등 QPSK)와 8-DPSK 방식을 채택하고 있으며, 초기 무선 LAN(802.11b) 역시 DBPSK와 DQPSK를 사용함

## 변조 신호의 복조 방법

송신기에서 변조된 신호는 채널을 통해 전달된 후 수신기에서 **복조** 과정을 거쳐 원래의 데이터로 변환됩니다. **복조기** 설계는 변조 방식에 따라 다르지만, 기본 원리는 **수신 신호의 특성을 측정**하고 이를 **가장 근접한 심볼이나 파형으로 판정**하는 것입니다.

### 아날로그 AM 신호의 복조

- **포락선 검파기**가 대표적인 복조기
- 반송파와 함께 수신된 AM 신호를 다이오드로 정류한 후 저역통과 필터로 거르면 반송파 진폭에 해당하는 신호(포락선)를 추출
- 반송파 성분이 거의 없거나 억압된 신호(DSB-SC, SSB 등)는 **동기 검파**를 시행
- 동기 검파는 **수신 신호와 같은 주파수**의 반송파를 국부 발진기로 생성하고 위상을 맞춘 뒤 곱셈기로 혼합하여 원 신호를 얻는 방법
- 동기 검파는 정확한 복조가 가능하지만 송신기와 주파수/위상 동기가 맞지 않으면 큰 오류가 발생하므로 위상 동기 루프(PLL) 등이 필요

### 디지털 변조 신호의 복조

- 디지털 변조 신호의 복조는 보통 **동기식**을 기본으로 함
- 수신기는 **수신 RF 신호를 믹서로 베이스밴드(또는 중간 주파수)로 변환**한 후, ADC를 거쳐 **디지털 신호 처리**로 심볼을 판정
- PSK나 QAM 수신기는 **코스타스 루프** 등을 사용해 반송파의 위상을 추정/보정하고 I축/Q축 성분을 얻은 뒤, **별자리 다이어그램** 상에서 수신된 점이 어느 심볼에 해당하는지 결정
- ASK 신호의 경우 수신 신호 **진폭을 계측**하여 미리 정해둔 임계값과 비교하여 심볼 식별
- FSK 신호의 경우에는 **주파수 스펙트럼 분석**이나 **필터 뱅크**를 사용하여 어떤 주파수 톤이 등장했는지 판별
- **비동기식 복조**가 가능한 차등 PSK(DPSK) 등은 **연속 심볼 간의 위상 변화**를 직접 비교하여 데이터 비트를 결정
- 현대 통신에서는 DSP 성능의 향상으로 대부분 동기 복조 방식을 택하고, 경우에 따라 채널 부호화와 결합하여 오류를 정정

## SDR에서의 변조 활용

최근에는 무선 통신 기기의 많은 부분이 **소프트웨어 정의 라디오(SDR)**로 구현되고 있습니다.

- **SDR**이란 전통적으로 **아날로그 하드웨어**로 구현되던 믹서, 필터, 증폭기, **변조기/복조기** 등을 **소프트웨어로 구현**하는 무선통신 시스템
- 하나의 범용 하드웨어로 신호를 받아 디지털로 변환한 뒤 소프트웨어에서 AM, FM, PSK, QAM 등 어떤 방식이든 프로그래밍된 대로 **처리**할 수 있음
- **동일한 장비**로도 소프트웨어 업그레이드를 통해 새로운 변조 방식이나 프로토콜을 지원할 수 있는 높은 유연성이 장점
- SDR의 일반적인 구성은 RF 프론트엔드(안테나, 저잡음증폭기 등)와 ADC/DAC, 그리고 PC나 DSP 프로세서로 이루어짐
- 송신 측 SDR에서는 디지털 신호 처리로 다양한 변조 방식을 구현하고 DAC를 통해 아날로그 RF 신호로 변환해 송신하며, 수신 측에서는 그 반대 과정을 거침
- 군용 무전기나 **휴대폰 기지국** 등 다양한 프로토콜을 하나의 장비로 운용해야 하는 분야에서 특히 각광받고 있음
- 앞으로 **인지 무선**(cognitive radio)처럼 환경에 따라 변조 방식까지 스스로 최적화하는 지능형 무선 시스템이 등장할 것으로 기대되며, SDR이 이러한 변화를 뒷받침하는 핵심 기술이 될 것임

## 정리

**변조**는 정보를 효율적으로 전달하기 위한 필수 개념으로서, 아날로그/디지털 변조 방식 각각의 특성과 장단점이 있습니다. 진폭, 주파수, 위상 등의 변조 기법과 그 조합(QAM)을 통해 통신 시스템은 다양한 요구 사항(거리, 데이터율, 신뢰도)에 대응하고 있습니다.

**복조**는 수신기의 기술로서, 정확한 동기화와 신호 처리 알고리즘이 관건이며, 현대에는 소프트웨어 기반의 유연한 구현(SDR)을 통해 다양한 변조 방식을 하나의 장치로 다룰 수 있게 되었습니다.